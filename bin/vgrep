#!/bin/bash

set -eo pipefail

pattern="$1"
shift
locations="$*"
[ -z "$locations" ] && locations=.

grep=grep
if [ -d .git ]; then
  grep='git grep'
fi

echo "$grep -lr $pattern $locations"
files=$($grep -lr $pattern $locations)
for file in $files; do
  echo $file
done

vim -c "/$pattern" "+normal zz" $files
